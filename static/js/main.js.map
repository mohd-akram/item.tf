{
  "version": 3,
  "file": "main.js",
  "sourceRoot": "/",
  "sources": [
    "main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "root = exports ? this\n\npriceSources = ['backpack.tf']\n\nclass User\n  constructor: ->\n    @id = getCookie 'steam_id'\n    @loggedIn = Boolean(@id)\n\n    Object.defineProperties @,\n      priceSource:\n        get: -> getCookie('price_source') or priceSources[0]\n        set: (source) -> setCookie 'price_source', source, 365\n\n  isOwnPage: -> @loggedIn and @id is\n    document.getElementById('steamid')?.getAttribute('data-id')\n\nclass Item\n  constructor: (@elem) ->\n    @name = @elem.title\n    @id = @elem.getAttribute 'data-index'\n    @url = @elem.getAttribute 'data-url'\n    @imageURL = @elem.getAttribute 'data-image'\n    @description = @elem.getAttribute('data-description') or ''\n    @level = @elem.getAttribute 'data-level'\n    @attributes = @elem.getElementsByClassName('attrs')[0]?.innerHTML or ''\n    @classes = @elem.getAttribute('data-classes')?.split(',') or []\n    @tags = @elem.getAttribute('data-tags')?.split(',') or []\n    @storePrice = @elem.getAttribute 'data-storeprice'\n    @blueprints = @elem.getElementsByClassName('prints')[0]\n      ?.getElementsByTagName('div') or []\n\n    @prices = {}\n    for source in priceSources\n      price = JSON.parse(@elem.getAttribute(\"data-#{source}\")\n                             ?.replace('Collector\"s', \"Collector's\") ? null)\n      @prices[source] = price if price\n\n    @wishIndex = @elem.getAttribute 'data-i'\n    @qualityNo = @elem.className.match(/quality-(\\d+)/)?[1]\n\nclass ItemBox\n  constructor: (@showLink=true) ->\n    @elem = document.createElement 'div'\n    @elem.id = 'itembox'\n    document.body.appendChild @elem\n\n  show: (@item) ->\n    @sources = (source for source in priceSources when source of @item.prices)\n    @source = user.priceSource\n\n    @_generate()\n    @elem.style.display = 'block'\n\n  hide: -> @elem.style.display = 'none'\n\n  _nextPriceSource: ->\n    @source = @sources[(@sources.indexOf(@source) + 1) % @sources.length]\n\n  _tagsHTML: ->\n    if @item.tags.length\n      html = '<div id=\"tags\">'\n      isWeapon = 'weapon' in @item.tags\n      isToken = 'token' in @item.tags\n\n      for i in ['primary', 'secondary', 'melee', 'pda2']\n        if i in @item.tags\n          if isWeapon\n            [title, image] = [\"#{capitalize i} Weapon\", i]\n\n          else if isToken\n            [title, image] = ['Slot Token', 'slot-token']\n\n      for i in ['hat', 'misc', 'tool', 'bundle']\n        if i in @item.tags\n          [title, image] = [capitalize(i), i]\n\n      if isToken and @item.classes.length\n        [title, image] = ['Class Token', 'class-token']\n\n      if title? and image?\n        html +=\n          \"\"\"\n          <a href=\"/search?q=#{encodeURIComponent title}\"\n           target=\"_blank\" title=\"#{title}\" class=\"#{image}\"><img\n           src=\"/images/tags.png\" alt=\"#{title}\"></a>\n          \"\"\"\n\n      html += '</div>'\n    else ''\n\n  _nameHTML: ->\n    html = @item.name\n\n    if @showLink\n      html =\n        \"\"\"\n        <a href=\"#{@item.url}\"\n         class=\"glow\" title=\"Go to Item Page\">#{html}</a>\n        \"\"\"\n    html =\n      \"\"\"\n      <h2 id=\"itemname\">#{html}</h2>\n      <i id=\"shortlinkbutton\" class=\"fa fa-caret-square-down\"\n       title=\"Short URL\"></i><br>\n      <div id=\"shortlink\" style=\"display:none\">\n      <input type=\"text\" value=\"https://item.tf/#{@item.id}\" title=\"Shortlink\"\n       readonly><br>\n      </div>\n      \"\"\"\n\n  _classesHTML: ->\n    if @item.classes.length\n      html = '<div id=\"classes\">'\n      for class_ in @item.classes\n        html +=\n          \"\"\"\n          <a href=\"/search?q=#{class_}\" target=\"_blank\"\n           title=\"#{class_}\" class=\"#{class_.toLowerCase()}\"><img\n           src=\"/images/classes.png\" alt=\"#{class_}\"></a>\n          \"\"\"\n      html += '</div>'\n    else ''\n\n  _bundleHTML: ->\n    # Link to bundle items HTML\n    if 'bundle' in @item.tags and @item.description.indexOf('---') isnt -1\n      \"\"\"\n      <a href=\"/search?q=#{encodeURIComponent @item.name}%20Set\"\n       target=\"_blank\">\n      <div class=\"rounded glow\" style=\"display: inline-block; padding: 7px\">\n      View Items\n      </div>\n      </a>\n      \"\"\"\n    else ''\n\n  _priceSourceHTML: ->\n    html = ''\n\n    unless @item.prices[@source]\n      @_nextPriceSource()\n\n    if @item.prices[@source]\n      qualities = Object.keys(@item.prices[@source]).sort()\n      for quality in qualities\n        price = @item.prices[@source][quality]\n        denomMatch = price.match(/(Refined|Key(s)?|Bud(s)?)/)\n\n        if denomMatch\n          denom = denomMatch[0]\n\n          price = price.replace /(\\d+(\\.\\d+)?)/g,\n            \"<a href='/search?q=\\$1%20#{denom}'\n              target='_blank' class='glow'>\\$1</a>\"\n\n        html +=\n          \"\"\"\n          <a href=\"/search?q=#{quality}\" target=\"_blank\"\n           class=\"#{quality.toLowerCase().replace \"'\", ''}\">#{\n           quality}</a>: #{price}<br>\n          \"\"\"\n\n    return html\n\n  _pricesHTML: ->\n    html = @_priceSourceHTML()\n    if html then \"<div id='marketprice'><span id='pricesource'>#{\n      capitalize @source}</span><div id='prices'>#{html}</div></div>\" else ''\n\n  _blueprintsHTML: ->\n    if @item.blueprints.length\n      html = '<ul id=\"blueprints\">'\n      for blueprint in @item.blueprints\n        chance = blueprint.getAttribute 'data-chance'\n\n        html += '<li class=\"blueprint\"><ul>'\n        for item in blueprint.getElementsByTagName 'span'\n          for i in [0...item.getAttribute 'data-count']\n            name = item.title\n            index = item.getAttribute 'data-index'\n\n            listItem = \"<img src=\\\"#{item.getAttribute 'data-image'}\\\" alt=\\\"#{\n              name}\\\">\"\n\n            url = item.getAttribute 'data-url'\n\n            html += \"<li><a title=\\\"#{name}\\\" href=\\\"#{\n              url}\\\" class=\\\"item-small\\\" target='_blank'>#{listItem}</a></li>\"\n\n        html += \"</ul><span title=\\\"Crafting Chance\\\" class=\\\"chance\\\">#{\n          chance}%</span></li>\"\n\n      html += '</ul>'\n    else ''\n\n  _tradeHTML: ->\n    \"\"\"\n    <form name=\"tradeform\" method=\"POST\" style=\"display: inline-block\">\n\n      <input type=\"hidden\" name=\"json\">\n      <input type=\"submit\" name=\"submit\" value=\"Search!\" style=\"display: none\">\n\n      <select id=\"quality\" class=\"textbox\" title=\"Quality\">\n        <option value=\"6\">Unique</option>\n        <option value=\"3\">Vintage</option>\n        <option value=\"11\">Strange</option>\n        <option value=\"1\">Genuine</option>\n        <option value=\"14\">Collector's</option>\n        <option value=\"13\">Haunted</option>\n        <option value=\"5\">Unusual</option>\n      </select>\n\n    </form>\n    \"\"\"\n\n  _wishlistHTML: ->\n    if user.loggedIn\n      \"\"\"\n      <div style=\"display: inline-block;\">\n      <div id=\"wishlistmessage\"\n       style=\"display: none; margin: 0 0 4px -18px\">Added</div>\n      <i id=\"wishlistbutton\" class=\"fa fa-star fa-lg button-icon\"\n       title=\"Add to Wishlist\"></i>\n      </div>\n      \"\"\"\n    else ''\n\n  _buttonsHTML: ->\n    wikiLink = \"https://wiki.teamfortress.com/wiki/#{\n      encodeURIComponent @item.name}\"\n\n    \"\"\"\n    <div id=\"buttons\">\n\n    <a class=\"fa fa-info fa-lg button-icon\" target=\"_blank\"\n     title=\"Open in Wiki\" href=\"#{wikiLink}\"></a>\n\n    <a id=\"market-btn\" class=\"fa fa-shopping-cart fa-lg button-icon\"\n     target=\"_blank\" title=\"Community Market\"></a>\n\n    <a id=\"classifieds-btn\" class=\"fa fa-exchange-alt fa-lg button-icon\"\n     target=\"_blank\" title=\"Find Trades\"></a>\n\n    #{@_tradeHTML()}\n    #{@_wishlistHTML()}\n    </div>\n    \"\"\"\n\n  _buyHTML: ->\n    # Buy button and store price HTML\n    if @item.storePrice\n      \"\"\"\n      <div id=\"buy\">\n      <form style=\"display: inline-block\">$#{@item.storePrice}<br>\n      <input type=\"text\" value=\"1\" size=\"1\" id=\"quantity\" title=\"Quantity\"\n       class=\"textbox\" style=\"text-align: right\">\n      </form><a href=\"#\" target=\"_blank\" id=\"buybutton\"><img\n       src=\"https://steamcdn-a.akamaihd.net/apps/tf2/btn_buynow.png\"\n       alt=\"Buy Now\"></a></div>\n      \"\"\"\n    else ''\n\n  _nameLink: ->\n    linkButton = document.getElementById 'shortlinkbutton'\n    link = document.getElementById 'shortlink'\n\n    linkButton.onclick = ->\n      if link.style.display is 'none'\n        link.style.display = 'inline'\n        linkButton.className = linkButton.className.replace 'down', 'up'\n        link.getElementsByTagName('input')[0].select()\n      else\n        link.style.display = 'none'\n        linkButton.className = linkButton.className.replace 'up', 'down'\n\n  _pricesLink: ->\n    button = document.getElementById 'pricesource'\n    prices = document.getElementById 'prices'\n\n    if @sources.length > 1\n      button.style.cursor = 'pointer'\n\n      button.onclick = =>\n        @_nextPriceSource()\n\n        button.innerHTML = capitalize @source\n        prices.innerHTML = @_priceSourceHTML()\n\n      button.onmouseover = ->\n        button.style.textShadow = '0 0 10px rgb(196, 241, 128)'\n\n      button.onmouseout = ->\n        button.style.textShadow = ''\n\n  _buttonsLink: ->\n    (@form.quality.onchange = =>\n      market = document.getElementById 'market-btn'\n      quality = @form.quality.options[@form.quality.selectedIndex]\n        .text.toLowerCase()\n        .replace 'unique', 'Unique'\n        .replace 'genuine', 'rarity1'\n        .replace 'unusual', 'rarity4'\n        .replace \"collector's\", 'collectors'\n\n      market.href = \"https://steamcommunity.com/market/search?\\\n        category_440_Type%5B%5D=any&\\\n        category_440_Quality%5B%5D=tag_#{quality}&\\\n        appid=440&q=#{encodeURIComponent @item.name}\"\n\n      classifieds = document.getElementById 'classifieds-btn'\n      classifieds.href = \"https://backpack.tf/classifieds?item=#{\n        encodeURIComponent @item.name}&quality=#{@form.quality.value}\")()\n\n  _wishlistLink: ->\n    # Update wishlist item index\n    if user.isOwnPage()\n      for wish, idx in document.getElementsByClassName 'item'\n        if wish.getAttribute('data-i') is @item.wishIndex\n          @item.wishIndex = idx.toString()\n          break\n\n    if user.loggedIn\n      action = '/wishlist/add'\n      button = document.getElementById 'wishlistbutton'\n\n      if user.isOwnPage()\n        action = '/wishlist/remove'\n        button.title = 'Remove from Wishlist'\n\n      # Add to wishlist or remove from wishlist\n      button.onclick = =>\n        data = 'index': @item.id, 'quality': @form.quality.value\n\n        if user.isOwnPage()\n          data = 'i': @item.wishIndex\n\n        postAjax action, data, (response) =>\n          if response is 'Added'\n            message = document.getElementById 'wishlistmessage'\n            message.style.display = 'block'\n            message.className = 'animate__animated animate__fadeInLeft'\n            setTimeout (->\n              message.className = 'animate__animated animate__fadeOut'), 1000\n\n          else if response is 'Removed'\n            @hide()\n            @item.elem.parentNode.parentNode.removeChild @item.elem.parentNode\n\n  _buyLink: ->\n    button = document.getElementById 'buybutton'\n    if button\n      quantity = document.getElementById 'quantity'\n      (quantity.onchange = =>\n        button.href = \"https://store.steampowered.com/buyitem/440/#{\n          @item.id}/#{quantity.value}\")()\n\n  _generate: ->\n    # Itembox HTML\n    @elem.innerHTML =\n      \"\"\"\n      #{@_tagsHTML()}#{@_nameHTML()}#{@_classesHTML()}\n      #{@_bundleHTML()}\n      #{@_pricesHTML()}\n      #{@_blueprintsHTML()}\n      #{@_buttonsHTML()}#{@_buyHTML()}\n      \"\"\"\n\n    @form = document.tradeform\n\n    @_nameLink()\n    @_pricesLink()\n    @_buttonsLink()\n    @_wishlistLink()\n    @_buyLink()\n\n    # Hover area\n    hoverArea = document.createElement 'div'\n    hoverArea.id = 'hoverarea'\n\n    if @item.imageURL\n      img = document.createElement 'img'\n      img.alt = @item.name\n      img.src = @item.imageURL\n      hoverArea.appendChild img\n\n    # Add hover area to itembox\n    @elem.insertBefore hoverArea,\n      document.getElementById('blueprints') or\n      document.getElementById('buttons')\n\n    # Enable hover box\n    new HoverBox(hoverArea, null, @item)\n\n    # Wishlist item quality\n    if @item.qualityNo\n      @form.quality.value = @item.qualityNo\n    # Auto quality selection\n    else if @item.prices[@source]\n      for option, i in @form.quality.options\n        if option.innerHTML of @item.prices[@source]\n          @form.quality.selectedIndex = i\n          @form.quality.onchange()\n          break\n\nclass HoverBox\n  constructor: (area, @itemBox, @item) ->\n    # Allow providing only itemBox\n    # Area then becomes all 'item' elements\n    if area instanceof ItemBox\n      @itemBox = area\n      area = null\n\n    @elem = document.getElementById 'hoverbox'\n\n    unless @elem\n      @elem = document.createElement 'div'\n      @elem.id = 'hoverbox'\n      document.body.appendChild @elem\n\n    @_add(area)\n\n  _add: (area) ->\n    list = if area then [area] else document.getElementsByClassName 'item'\n\n    for item in list\n      item.addEventListener 'mouseout', @_hide, false\n      item.addEventListener 'mousemove', @_moveMouse, false\n      item.addEventListener 'mouseover', @_show, false\n      if @itemBox\n        item.addEventListener 'click', @_clickItem, false\n\n    if @itemBox\n      # iOS doesn't support 'click' on document\n      for event in ['click', 'touchend']\n        document.addEventListener event, @_hideItemBox, false\n      document.onkeydown = (e) => @itemBox.hide() if e.keyCode is 27\n\n  _show: (e) =>\n    item = @item or new Item e.currentTarget\n    description = escapeHTML item.description\n\n    if description\n      if 'bundle' in item.tags and description.indexOf('---') isnt -1\n        descList = description.split '---'\n        description =\n          \"\"\"\n          #{descList[0]}\n          <span style=\"color: #95af0c\">#{descList[1]}</span>\n          \"\"\"\n\n    @elem.innerHTML =\n      \"\"\"\n      <div class=\"name\">#{\n      item.name}</div><span class=\"level\">#{item.level}</span>#{\n      item.attributes}<div class=\"desc\">#{description}</div>\n      \"\"\"\n\n    @elem.style.display = 'block'\n\n  _hide: =>\n    @elem.style.display = 'none'\n\n  _hideItemBox: (e) =>\n    el = e.target\n    if el.className isnt 'item'\n      els = []\n      while el\n        els.push el\n        el = el.parentNode\n\n      @itemBox.hide() if @itemBox.elem not in els\n\n  _moveMouse: (e) =>\n    @elem.style.top = \"#{e.pageY + 28}px\"\n    @elem.style.left = \"#{e.pageX - 154}px\"\n\n  _clickItem: (e) =>\n    @itemBox.show new Item e.currentTarget\n    e.preventDefault()\n    e.stopPropagation()\n\ncapitalize = (word) ->\n  word[0].toUpperCase() + word[1...]\n\nescapeHTML = (string) ->\n  string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\ngetCookie = (name) ->\n  cookies = document.cookie.split ';'\n\n  for cookie in cookies\n    cookie = cookie[1...] while cookie[0] is ' '\n    return cookie[name.length + 1...] if cookie[...name.length] is name\n\nsetCookie = (name, value, days) ->\n  expires = ''\n\n  if days\n    date = new Date\n    date.setDate(date.getDate() + days)\n    expires = \";expires=#{date.toUTCString()}\"\n\n  document.cookie = \"#{name}=#{value}#{expires}\"\n\najax = (url, callback) ->\n  request = _getAjaxRequest(callback)\n  request.open 'GET', url, true\n  request.setRequestHeader 'X-Requested-With', 'XMLHttpRequest'\n  request.send()\n\npostAjax = (url, data, callback) ->\n  request = _getAjaxRequest(callback)\n  request.open 'POST', url, true\n  request.setRequestHeader 'Content-Type',\n                           'application/x-www-form-urlencoded'\n\n  request.send (\"#{name}=#{value}\" for name, value of data).join('&')\n\n_getAjaxRequest = (callback) ->\n  request = new XMLHttpRequest\n\n  request.onreadystatechange = ->\n    if request.readyState is 4 and request.status is 200\n      callback request.responseText\n\n  return request\n\nroot.user = new User\n\nroot.Item = Item\nroot.ItemBox = ItemBox\nroot.HoverBox = HoverBox\n"
  ]
}